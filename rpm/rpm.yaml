# -*- mode: yaml; indent-tabs-mode: nil -*-
name: rpm
buildsystem: cmake
config-opts:
  - -DENABLE_TESTSUITE=OFF
  - -DWITH_AUDIT=OFF
  - -DWITH_DBUS=OFF
  - -DWITH_SEQUOIA=OFF
build-commands:
  - sed -i -e 's!${Python3_SITEARCH}!/app/lib/python'"$(python3 -c 'import sys; print(f"{sys.version_info.major}.{sys.version_info.minor}")')"'/site-packages!' python/CMakeLists.txt
sources:
  - type: archive
    url: https://ftp.osuosl.org/pub/rpm/releases/rpm-4.20.x/rpm-4.20.1.tar.bz2
    sha256: 52647e12638364533ab671cbc8e485c96f9f08889d93fe0ed104a6632661124f
    dest-filename: rpm-4.20.1.tar.bz2
modules:
  - ../shared-modules/lua5.4/lua-5.4.json
  - name: popt
    buildsystem: autotools
    sources:
      - type: archive
        url: https://ftp.osuosl.org/pub/rpm/popt/releases/popt-1.x/popt-1.19.tar.gz
        sha256: c25a4838fc8e4c1c8aacb8bd620edb3084a3d63bf8987fdad3ca2758c63240f9
        dest-filename: popt-1.19.tar.gz
